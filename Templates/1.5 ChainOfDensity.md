## QA Framework: Chain of Density â€“ Manual Testing Template

**Role:** Manual QA Specialist

**Objective:**  
To extract and layer multiple test dimensions from a single user story, ensuring dense coverage across functional, edge-case, compliance, and integration scenarios.

**Details:**  
- Begin with a clear understanding of the user story and acceptance criteria  
- Identify core functionality and user intent  
- Break down the story into granular testable components  
- Layer validations, workflows, UI behaviors, and data conditions  
- Include business rules, compliance checks, and integration points

**Examples:**  
- Field-level validation: amount must be > 0  
- UI behavior: transport type dropdown shows taxi, train, bus  
- Workflow: submission triggers approval process  
- Error handling: missing receipt blocks submission  
- Compliance: uploaded files meet PCI and format requirements  
- Integration: simulate third-party API failure for receipt verification

**Scope:**  
- Includes: UI testing, form validation, workflow logic, file upload behavior, error handling  
- Excludes: Automation, performance, backend DB validation  
- Assumptions: Authenticated user, stable environment, test data available  
- Constraints: Must comply with PCI standards, simulate external service failures

---

## QA Framework: Chain of Density â€“ Manual Testing Template

**Role:** Manual QA Specialist

**Objective:**  
To extract and layer multiple test dimensions from a single user story, ensuring dense coverage across functional, edge-case, compliance, and integration scenarios.

**Details:**  
- Begin with a clear understanding of the user story and acceptance criteria  
- Identify core functionality and user intent  
- Break down the story into granular testable components  
- Layer validations, workflows, UI behaviors, and data conditions  
- Include business rules, compliance checks, and integration points

**Examples:**  
- Field-level validation: amount must be > 0  
- UI behavior: transport type dropdown shows taxi, train, bus  
- Workflow: submission triggers approval process  
- Error handling: missing receipt blocks submission  
- Compliance: uploaded files meet PCI and format requirements  
- Integration: simulate third-party API failure for receipt verification

**Scope:**  
- Includes: UI testing, form validation, workflow logic, file upload behavior, error handling  
- Excludes: Automation, performance, backend DB validation  
- Assumptions: Authenticated user, stable environment, test data available  
- Constraints: Must comply with PCI standards, simulate external service failures

---

### ðŸ§  Chain of Density Approach

1. **Start with the core flow** â€“ what the user is expected to do  
2. **Add validation layers** â€“ what must be checked at each step  
3. **Include edge cases** â€“ what could go wrong or be unusual  
4. **Factor in compliance** â€“ what standards must be met  
5. **Simulate integrations** â€“ how external systems affect behavior  
6. **Document all layers** â€“ ensure traceability and coverage

---

## ðŸ” CHAIN OF DENSITY ANALYSIS

### User Story Under Analysis:
**Submit Transport Expense** - As an employee, I want to submit a transport expense for travel-related costs such as taxi or train fares, so that I can be reimbursed for necessary business transportation.

---

## Layer 1: Core Flow Foundation
**What the user is expected to do**

### **Primary User Journey:**
```
Employee Access â†’ Category Selection â†’ Transport Type â†’ Expense Details â†’ Receipt Upload â†’ Review â†’ Submit â†’ Approval Workflow
```

**Core Actions:**
- Access expense submission interface
- Select "Transportation" from expense categories  
- Choose transport type (Taxi/Train/Bus)
- Enter amount, date, and description
- Upload receipt file
- Submit for approval
- Track approval status

**Expected System Responses:**
- Display Transportation option in categories
- Show transport type dropdown with 3 options
- Accept valid expense data entry
- Process file upload successfully
- Generate confirmation and request ID
- Initiate approval workflow

---

## Layer 2: Validation Layers
**What must be checked at each step**

### **Category Selection Validation:**
```
âœ“ "Transportation" appears in Other Expense categories
âœ“ Category selection is persistent during form completion
âœ“ Category change clears dependent fields appropriately
âœ— Invalid category selections rejected
âœ— Missing category selection prevents progression
```

### **Transport Type Validation:**
```
âœ“ Dropdown shows exactly: Taxi, Train, Bus
âœ“ Each option is selectable and persistent
âœ“ Selection affects form behavior appropriately
âœ— Invalid transport types not available
âœ— Custom/unlisted transport types rejected
âœ— Empty transport type selection blocked
```

### **Amount Field Validation:**
```
âœ“ Accepts positive decimal values (25.50, 100.00)
âœ“ Currency formatting applied correctly
âœ“ Reasonable business amounts processed
âœ— Negative amounts (-25.50) rejected with error
âœ— Zero amounts (0.00) rejected with error  
âœ— Non-numeric input ("abc", "twenty") rejected
âœ— Excessive amounts (999999999) trigger policy check
âœ— Empty amount field blocks submission
```

### **Date Field Validation:**
```
âœ“ Valid past dates within policy window accepted
âœ“ Date picker functionality works correctly
âœ“ Date format standardized (MM/DD/YYYY)
âœ— Future dates beyond policy rejected
âœ— Dates outside acceptable range (>90 days ago) rejected
âœ— Invalid date formats (32/13/2025) rejected
âœ— Empty date field blocks submission
```

### **Description Validation:**
```
âœ“ Business-appropriate descriptions accepted
âœ“ Standard punctuation and spaces allowed
âœ“ Reasonable length descriptions (up to 255 chars)
âœ— Empty descriptions rejected with error
âœ— Excessive length (>255 chars) truncated or rejected
âœ— Special characters (<script>, SQL injection) sanitized
âœ— Inappropriate content flagged
```

### **Receipt Upload Validation:**
```
âœ“ PDF files (up to 10MB) uploaded successfully
âœ“ JPG/JPEG files (up to 10MB) uploaded successfully  
âœ“ PNG files (up to 10MB) uploaded successfully
âœ“ Upload progress indicator displayed
âœ“ File preview available after upload
âœ— Unsupported formats (.txt, .exe, .doc) rejected
âœ— Oversized files (>10MB) rejected with clear error
âœ— Corrupted files rejected with error message
âœ— Malicious files blocked by security scan
âœ— Missing receipt prevents submission
```

---

## Layer 3: Edge Cases
**What could go wrong or be unusual**

### **Input Edge Cases:**
```
Boundary Values:
- Amount: $0.01 (minimum), $999,999.99 (maximum)
- Date: Today, 90 days ago (policy limit)
- Description: 1 character, 255 characters exactly
- File size: 9.99MB, 10.00MB, 10.01MB

Special Characters:
- Unicode in description: "CafÃ© â†’ Airport"
- Emoji characters: "ðŸš– taxi ride"
- International currency symbols: "Â£25.50"
- Special file names: "receipt (1).pdf", "receipt&invoice.jpg"
```

### **User Behavior Edge Cases:**
```
Rapid Interactions:
- Double-clicking submit button
- Multiple file uploads simultaneously
- Fast typing in amount field
- Rapid dropdown selections

Navigation Edge Cases:
- Browser back button during submission
- Refresh page with partial data
- Multiple browser tabs open
- Session timeout during form completion

Form State Edge Cases:
- Editing submitted but not approved expense
- Copying expense data between forms
- Auto-save with invalid data
- Form reset with uploaded files
```

### **System Edge Cases:**
```
Network Conditions:
- Slow internet during file upload
- Connection timeout mid-submission
- Intermittent connectivity
- Large file upload with network interruption

Browser Compatibility:
- Different file upload behaviors
- JavaScript disabled scenarios
- Old browser version compatibility
- Mobile device constraints

Concurrent Access:
- Multiple users uploading to same storage
- Policy changes during form completion
- Manager hierarchy changes mid-approval
- System maintenance during submission
```

---

## Layer 4: Compliance Standards
**What standards must be met**

### **PCI Compliance Layer:**
```
Data Protection:
âœ“ Receipt images encrypted at rest
âœ“ Secure transmission (HTTPS) for all uploads
âœ“ Access logging for all file operations
âœ“ Data retention policies enforced
âœ— Unencrypted sensitive data transmission
âœ— Unauthorized access to receipt files
âœ— Missing audit trails for financial data
âœ— Non-compliant data storage practices
```

### **File Security Compliance:**
```
Upload Security:
âœ“ Virus scanning on all uploaded files
âœ“ File type verification beyond extension
âœ“ Content analysis for malicious code
âœ“ Size limits enforced server-side
âœ— Malicious file execution prevented
âœ— XSS attacks through file uploads blocked
âœ— Buffer overflow attacks prevented
âœ— Social engineering file names rejected
```

### **Financial Compliance:**
```
Audit Requirements:
âœ“ Complete transaction logging
âœ“ User action traceability
âœ“ Approval decision recording
âœ“ Data modification history
âœ— Unauthorized expense modifications blocked
âœ— Backdated approval attempts prevented
âœ— Duplicate submission detection active
âœ— Policy violation flagging operational
```

### **Privacy Compliance (GDPR):**
```
Data Privacy:
âœ“ User consent for data processing
âœ“ Right to data deletion implemented
âœ“ Data minimization practices followed
âœ“ Cross-border data transfer safeguards
âœ— Unauthorized personal data access prevented
âœ— Data retention limits enforced
âœ— User data export functionality available
âœ— Privacy breach notification procedures active
```

---

## Layer 5: Integration Simulations
**How external systems affect behavior**

### **Email Service Integration:**
```
Normal Operation:
âœ“ Submission confirmation emails sent
âœ“ Approval notification emails delivered
âœ“ Status update emails triggered correctly
âœ“ Email template formatting correct

Failure Scenarios:
âœ— Email service down â†’ User notified, process continues
âœ— Invalid email addresses â†’ Admin alerted, retry mechanism
âœ— Email delivery delays â†’ Status tracking reflects delays
âœ— Bounce/spam filtering â†’ Alternative notification methods
```

### **File Storage Integration:**
```
Normal Operation:
âœ“ Files stored in secure cloud storage
âœ“ File retrieval for approval process works
âœ“ Backup and redundancy operational
âœ“ File access permissions enforced

Failure Scenarios:
âœ— Storage quota exceeded â†’ Clear error message, admin alert
âœ— Storage service outage â†’ Local temp storage, retry mechanism  
âœ— File corruption â†’ Integrity checks, re-upload prompt
âœ— Access permission errors â†’ Fallback authentication, admin escalation
```

### **Approval Workflow Integration:**
```
Normal Operation:
âœ“ Manager assignment based on org hierarchy
âœ“ Approval routing follows business rules
âœ“ Status updates propagate correctly
âœ“ Escalation triggers work properly

Failure Scenarios:
âœ— Manager unavailable â†’ Delegation rules applied
âœ— Workflow engine down â†’ Manual process notification
âœ— Approval timeouts â†’ Automatic escalation triggered
âœ— Circular approval loops â†’ Detection and prevention active
```

### **Finance System Integration:**
```
Normal Operation:
âœ“ Approved expenses sync to finance system
âœ“ Reimbursement processing initiated
âœ“ Accounting code assignment correct
âœ“ Exchange rate calculation accurate

Failure Scenarios:
âœ— Finance system unavailable â†’ Queue for retry, admin notification
âœ— Data format mismatches â†’ Transformation layer handles conversion
âœ— Duplicate expense detection â†’ Cross-system validation prevents duplicates
âœ— Reimbursement failures â†’ Error tracking and manual intervention triggers
```

### **Authentication Service Integration:**
```
Normal Operation:
âœ“ Single sign-on works seamlessly
âœ“ User permissions validated correctly
âœ“ Session management functions properly
âœ“ Role-based access enforced

Failure Scenarios:
âœ— Auth service outage â†’ Cached credentials allow limited access
âœ— Permission sync delays â†’ Conservative access restrictions applied
âœ— Token expiration â†’ Graceful re-authentication prompt
âœ— Account lockout â†’ Admin notification and manual override process
```

---

## Layer 6: Documentation & Traceability
**Ensure all layers are covered and traceable**

### **Dense Test Coverage Matrix:**

| Test Dimension | AC1 | AC2 | AC3 | AC4 | AC5 | AC6 | Edge Cases | Compliance | Integration |
|----------------|-----|-----|-----|-----|-----|-----|------------|------------|-------------|
| **UI Validation** | âœ“ Category dropdown | âœ“ Transport types | âœ“ Form fields | âœ“ Upload UI | âœ“ Multi-expense UI | âœ“ Status display | âœ“ Error states | âœ“ Security UI | âœ“ Offline behavior |
| **Data Validation** | âœ“ Category exists | âœ“ Valid types only | âœ“ Field formats | âœ“ File formats | âœ“ Multiple entries | âœ“ Status data | âœ“ Boundary values | âœ“ Data encryption | âœ“ Data sync |
| **Business Logic** | âœ“ Category rules | âœ“ Type restrictions | âœ“ Amount policies | âœ“ Receipt rules | âœ“ Batch processing | âœ“ Approval rules | âœ“ Policy violations | âœ“ Audit trails | âœ“ Workflow routing |
| **Error Handling** | âœ“ Invalid category | âœ“ Invalid type | âœ“ Invalid data | âœ“ Upload failures | âœ“ Batch errors | âœ“ Approval errors | âœ“ System errors | âœ“ Security violations | âœ“ Service outages |
| **Security** | âœ“ Access control | âœ“ Data validation | âœ“ Input sanitization | âœ“ File security | âœ“ Batch security | âœ“ Approval security | âœ“ Attack vectors | âœ“ PCI compliance | âœ“ Auth integration |

### **Test Case Density Map:**

**High Density Areas (15+ test cases each):**
- File Upload Validation (AC4) - Format, size, security, integration failures
- Amount Field Validation (AC3) - Numeric validation, business rules, edge cases
- Approval Workflow (AC6) - Normal flow, failures, integrations, compliance

**Medium Density Areas (8-14 test cases each):**
- Multi-expense Processing (AC5) - Batch operations, partial failures, UI complexity
- Transport Type Validation (AC2) - Selection logic, restrictions, edge cases

**Lower Density Areas (3-7 test cases each):**
- Category Selection (AC1) - Basic functionality with few variations
- Date/Description Validation (AC3) - Standard field validation patterns

### **Traceability Documentation:**

**Requirements â†’ Test Cases:**
```
AC1.1: Transportation category available â†’ TC-UI-001, TC-VAL-001, TC-SEC-001
AC1.2: Category selection persistent â†’ TC-UI-002, TC-EDGE-001
AC2.1: Three transport types available â†’ TC-UI-003, TC-VAL-002
AC2.2: Only valid types selectable â†’ TC-VAL-003, TC-SEC-002
[...continues for all ACs...]
```

**Risk Areas â†’ Test Coverage:**
```
High Risk: File Upload Security â†’ 12 test cases covering malware, size, format, injection
High Risk: Financial Data Integrity â†’ 8 test cases covering validation, audit, compliance
Medium Risk: UI State Management â†’ 6 test cases covering edge cases, concurrency
[...continues for all risk areas...]
```

### **Success Criteria Per Layer:**

**Layer 1 (Core Flow): 100% of happy path scenarios pass**
**Layer 2 (Validation): 95% of validation rules enforced correctly**  
**Layer 3 (Edge Cases): 90% of edge cases handled gracefully**
**Layer 4 (Compliance): 100% of compliance requirements verified**
**Layer 5 (Integration): 85% of integration scenarios tested successfully**
**Layer 6 (Documentation): 100% traceability between requirements and tests**

---
